name: Build Cargo Sweep Binary

on:
  schedule:
    # friday noon
    - cron: '0 12 * * 5'
    # or manually run
  workflow_dispatch:

env:
  CARGO_TERM_COLOR: always

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
      - name: Build
        run: cargo install cargo-sweep
      - uses: actions/checkout@v2
        with:
          ref: ${{ github.head_ref }}
      - name: Transfer Binary
        run: 'mv ~/.cargo/bin/cargo-sweep ci/cargo-sweep'
      - run: git pull
      - name: Commit Binary
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "ðŸ¤– build cargo-sweep binary for ci use"