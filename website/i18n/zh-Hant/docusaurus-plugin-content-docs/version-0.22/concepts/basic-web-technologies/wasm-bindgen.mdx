---
title: 'wasm-bindgen'
sidebar_label: wasm-bindgen
---

[`wasm-bindgen`](https://github.com/rustwasm/wasm-bindgen) æ˜¯ä¸€å€‹åœ¨ JavaScript å’Œ Rust å‡½æ•¸ä¹‹é–“å»ºç«‹å‘¼å«æ©‹æ¨‘çš„å‡½å¼åº«å’Œå·¥å…·ã€‚å®ƒæ˜¯ç”± [Rust å’Œ WebAssembly å·¥ä½œå°çµ„](https://rustwasm.github.io/) ä½¿ç”¨ Rust å»ºæ§‹çš„ã€‚

Yew ä½¿ç”¨ `wasm-bindgen` é€éä¸€äº› crate èˆ‡ç€è¦½å™¨é€²è¡Œäº’å‹•ï¼š

- [`js-sys`](https://crates.io/crates/js-sys)
- [`wasm-bindgen`](https://crates.io/crates/wasm-bindgen)
- [`wasm-bindgen-futures`](https://crates.io/crates/wasm-bindgen-futures)
- [`web-sys`](https://crates.io/crates/web-sys)

æœ¬ç¯€å°‡å¾æ›´æŠ½è±¡çš„å±¤æ¬¡æ¢è¨é€™äº› crateï¼Œä»¥ä¾¿æ›´å®¹æ˜“ç†è§£å’Œä½¿ç”¨ Yew ä¸­çš„ `wasm-bindgen` APIã€‚è¦äº†è§£æœ‰é—œ `wasm-bindgen` åŠå…¶ç›¸é—œ crate çš„æ›´æ·±å…¥æŒ‡å—ï¼Œè«‹æŸ¥çœ‹ [`wasm-bindgen` æŒ‡å¼•](https://wasm-bindgen.github.io/wasm-bindgen/)ã€‚

æœ‰é—œä¸Šè¿° crate çš„æ–‡æª”ï¼Œè«‹æŸ¥çœ‹ [`wasm-bindgen docs.rs`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/index.html)ã€‚

:::tip
ä½¿ç”¨ `wasm-bindgen` doc.rs æœå°‹ä¾†å°‹æ‰¾å·²ä½¿ç”¨ `wasm-bindgen` åŒ¯å…¥çš„ç€è¦½å™¨ API å’Œ JavaScript é¡å‹ã€‚
:::

## [`wasm-bindgen`](https://crates.io/crates/wasm-bindgen)

é€™å€‹ crate ç‚ºä¸Šé¢çš„å…¶ä»– crate æä¾›äº†è¨±å¤šæ§‹å»ºå¡Šã€‚åœ¨æœ¬ç¯€ä¸­ï¼Œæˆ‘å€‘åªæœƒæ¶µè“‹ `wasm-bindgen` crate çš„å…©å€‹ä¸»è¦é ˜åŸŸï¼Œå³å·¨é›†å’Œä¸€äº›æ‚¨æœƒä¸€éåˆä¸€éçœ‹åˆ°çš„é¡å‹/ç‰¹æ€§ã€‚

### `#[wasm_bindgen]` macro

`#[wasm_bindgen]` å·¨é›†æä¾›äº† Rust å’Œ JavaScript ä¹‹é–“çš„æ¥å£ï¼Œæä¾›äº†ä¸€å€‹åœ¨å…©è€…ä¹‹é–“é€²è¡Œè½‰æ›çš„ç³»çµ±ã€‚ä½¿ç”¨é€™å€‹å·¨é›†æ›´ç‚ºé«˜ç´šï¼Œé™¤éæ‚¨è¦ä½¿ç”¨å¤–éƒ¨ JavaScript å‡½å¼åº«ï¼Œå¦å‰‡ä¸æ‡‰è©²ä½¿ç”¨å®ƒã€‚ `js-sys` å’Œ `web-sys` crate ç‚ºå…§å»º JavaScript é¡å‹å’Œç€è¦½å™¨ API æä¾›äº† `wasm-bindgen` å®šç¾©ã€‚

è®“æˆ‘å€‘é€éä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ä¾†ä½¿ç”¨`#[wasm-bindgen]` å·¨é›†ä¾†åŒ¯å…¥ä¸€äº›ç‰¹å®šç‰ˆæœ¬çš„[`console.log`](https://developer.mozilla.org/en-US/docs/Web/ API/Console/log) å‡½æ•¸ã€‚

```rust ,no_run
use wasm_bindgen::prelude::*;

// é¦–å…ˆè®“æˆ‘å€‘æ‰‹å‹•ç¶å®š `console.log`ï¼Œè€Œä¸ä½¿ç”¨ `web_sys` çš„å¹«åŠ©ã€‚
// åœ¨é€™è£¡ï¼Œæˆ‘å€‘æ‰‹å‹•å¯« `#[wasm_bindgen]` è¨»è§£ï¼Œæˆ‘å€‘ç¨‹å¼çš„æ­£ç¢ºæ€§å–æ±ºæ–¼é€™äº›è¨»è§£çš„æ­£ç¢ºæ€§ï¼
#[wasm_bindgen]
extern "C" {
    // åœ¨é€™è£¡ä½¿ç”¨ `js_namespace` ä¾†ç¶å®š `console.log(..)` è€Œä¸æ˜¯åªæœ‰ `log(..)`
    #[wasm_bindgen(js_namespace = console)]
    fn log(s: &str);

    // `console.log` æ˜¯å¤šæ…‹çš„ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ä½¿ç”¨å¤šå€‹ç°½ç« ç¶å®šå®ƒã€‚
    #[wasm_bindgen(js_namespace = console, js_name = log)]
    fn log_u32(a: u32);

    // å¤šå€‹åƒæ•¸ä¹Ÿæ˜¯å¯ä»¥çš„ï¼
    #[wasm_bindgen(js_namespace = console, js_name = log)]
    fn log_many(a: &str, b: &str);
}

// ä½¿ç”¨å°å…¥çš„å‡½æ•¸ï¼
log("Hello from Rust!");
log_u32(42);
log_many("Logging", "many values!");
```

_é€™å€‹ç¯„ä¾‹æ˜¯åŸºæ–¼ [1.2 ä½¿ç”¨ console.log çš„ `wasm-bindgen` æŒ‡å¼•](https://wasm-bindgen.github.io/wasm-bindgen/examples/console-log.html) æ”¹ç·¨çš„ã€‚ _

### æ¨¡æ“¬ç¹¼æ‰¿

åœ¨ JavaScript é¡åˆ¥ä¹‹é–“çš„ç¹¼æ‰¿æ˜¯ JavaScript èªè¨€çš„æ ¸å¿ƒç‰¹æ€§ï¼ŒDOMï¼ˆæ–‡ä»¶ç‰©ä»¶æ¨¡å‹ï¼‰æ˜¯åœç¹å®ƒè¨­è¨ˆçš„ã€‚ç•¶ä½¿ç”¨ `wasm-bindgen` åŒ¯å…¥é¡å‹æ™‚ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ–°å¢æè¿°å®ƒå€‘ç¹¼æ‰¿é—œä¿‚çš„å±¬æ€§ã€‚

åœ¨Rust ä¸­ï¼Œé€™ç¨®ç¹¼æ‰¿é—œä¿‚ä½¿ç”¨[`Deref`](https://doc.rust-lang.org/std/ops/trait.Deref.html) å’Œ[`AsRef`](https://doc. rust-lang.org/std/convert/trait.AsRef.html) ç‰¹æ€§ä¾†è¡¨ç¤ºã€‚é€™è£¡èˆ‰å€‹ä¾‹å­å¯èƒ½æœƒæœ‰æ‰€å¹«åŠ©ï¼›å‡è¨­æ‚¨æœ‰ä¸‰ç¨®é¡å‹ `A`ã€`B` å’Œ `C`ï¼Œå…¶ä¸­ `C` æ“´å±•äº† `B`ï¼Œè€Œ `B` åˆæ“´å±•äº† `A`ã€‚

åœ¨åŒ¯å…¥é€™äº›é¡å‹æ™‚ï¼Œ`#[wasm-bindgen]` å·¨é›†å°‡æŒ‰ç…§ä¸‹åˆ—æ–¹å¼å¯¦ä½œ `Deref` å’Œ `AsRef` ç‰¹æ€§ï¼š

- `C` å¯ä»¥ `Deref` åˆ° `B`
- `B` å¯ä»¥ `Deref` åˆ° `A`
- `C` å¯ä»¥è¢« `AsRef` åˆ° `B`
- `C` å’Œ `B` éƒ½å¯ä»¥è¢« `AsRef` åˆ° `A`

é€™äº›å¯¦ä½œå…è¨±æ‚¨åœ¨ `C` çš„å¯¦ä¾‹ä¸Šå‘¼å« `A` çš„æ–¹æ³•ï¼Œä¸¦å°‡ `C` ç”¨ä½œ `&B` æˆ– `&A`ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨`#[wasm-bindgen]` å°å…¥çš„æ¯ç¨®é¡å‹éƒ½æœ‰ç›¸åŒçš„æ ¹é¡å‹ï¼Œæ‚¨å¯ä»¥å°‡å…¶è¦–ç‚ºä¸Šé¢ç¯„ä¾‹ä¸­çš„`A`ï¼Œé€™ç¨®é¡å‹æ˜¯[`JsValue`](#jsvalue)ï¼Œä¸‹é¢æœ‰å®ƒçš„éƒ¨åˆ†ã€‚

_[`wasm-bindgen` æŒ‡å¼•ä¸­çš„ extends éƒ¨åˆ†](https://wasm-bindgen.github.io/wasm-bindgen/reference/attributes/on-js-imports/extends.html)_

### [`JsValue`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/struct.JsValue.html)

é€™æ˜¯ JavaScript æ“æœ‰çš„ç‰©ä»¶çš„è¡¨ç¤ºï¼Œé€™æ˜¯ `wasm-bindgen` çš„æ ¹æ•ç²é¡å‹ã€‚ä»»ä½•ä¾†è‡ª`wasm-bindgen` çš„å‹åˆ¥éƒ½æ˜¯`JsValue`ï¼Œé€™æ˜¯å› ç‚ºJavaScript æ²’æœ‰å¼·å‹åˆ¥ç³»çµ±ï¼Œå› æ­¤æ¥å—è®Šæ•¸`x` çš„ä»»ä½•å‡½æ•¸éƒ½ä¸å®šç¾©å…¶å‹åˆ¥ï¼Œå› æ­¤`x` å¯ä»¥æ˜¯æœ‰æ•ˆçš„JavaScript å€¼ï¼›å› æ­¤`JsValue`ã€‚å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨æ¥å— `JsValue` çš„å°å…¥å‡½æ•¸æˆ–é¡å‹ï¼Œé‚£éº¼ä»»ä½•å°å…¥çš„å€¼åœ¨æŠ€è¡“ä¸Šéƒ½æ˜¯æœ‰æ•ˆçš„ã€‚

`JsValue` å¯ä»¥è¢«å‡½æ•¸æ¥å—ï¼Œä½†è©²å‡½æ•¸å¯èƒ½ä»ç„¶åªæ¥å—æŸäº›é¡å‹ï¼Œé€™å¯èƒ½æœƒå°è‡´panic - å› æ­¤åœ¨ä½¿ç”¨åŸå§‹`wasm-bindgen` API æ™‚ï¼Œè«‹æª¢æŸ¥å°å…¥çš„JavaScript çš„æ–‡æª”ï¼Œä»¥ç¢ºå®šæ˜¯å¦æœƒåœ¨è©²å€¼ä¸æ˜¯æŸç¨®é¡å‹æ™‚å¼•ç™¼ç•°å¸¸ï¼ˆpanicï¼‰ã€‚

_[`JsValue` æ–‡ä»¶](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/struct.JsValue.html)ã€‚ _

### [`JsCast`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html)

Rust æœ‰ä¸€å€‹å¼·å‹åˆ¥ç³»çµ±ï¼Œè€Œ JavaScriptâ€¦æ²’æœ‰ğŸ˜ã€‚ç‚ºäº†è®“ Rust ä¿æŒé€™äº›å¼·å‹åˆ¥ä½†ä»ç„¶æ–¹ä¾¿ï¼ŒWebAssembly å·¥ä½œå°çµ„æå‡ºäº†ä¸€å€‹éå¸¸å·§å¦™çš„ç‰¹æ€§ `JsCast`ã€‚å®ƒçš„å·¥ä½œæ˜¯å¹«åŠ©æ‚¨å¾ä¸€å€‹JavaScript "é¡å‹" è½‰æ›åˆ°å¦ä¸€å€‹"é¡å‹"ï¼Œé€™è½èµ·ä¾†å¾ˆæ¨¡ç³Šï¼Œä½†å®ƒæ„å‘³è‘—å¦‚æœæ‚¨æœ‰ä¸€å€‹é¡å‹ï¼Œæ‚¨çŸ¥é“å®ƒæ˜¯å¦ä¸€å€‹é¡å‹ï¼Œé‚£éº¼æ‚¨å¯ä»¥ä½¿ç”¨`JsCast ` çš„å‡½æ•¸å¾ä¸€å€‹å‹åˆ¥è·³åˆ°å¦ä¸€å€‹å‹åˆ¥ã€‚ç•¶ä½¿ç”¨ `web-sys`ã€`wasm_bindgen`ã€`js-sys` æ™‚ï¼Œäº†è§£é€™å€‹å¾ˆå¥½çš„ç‰¹æ€§ - æ‚¨æœƒæ³¨æ„åˆ°è¨±å¤šé¡å‹å°‡å¾é€™äº› crate ä¸­å¯¦ä½œ `JsCast`ã€‚

`JsCast` æä¾›äº†è½‰æ›çš„æª¢æŸ¥å’Œä¸æª¢æŸ¥æ–¹æ³•- å› æ­¤åœ¨é‹è¡Œæ™‚ï¼Œå¦‚æœæ‚¨ä¸ç¢ºå®šæŸå€‹ç‰©ä»¶æ˜¯ä»€éº¼é¡å‹ï¼Œæ‚¨å¯ä»¥å˜—è©¦å°‡å…¶è½‰æ›ï¼Œé€™å°‡è¿”å›å¯èƒ½çš„å¤±æ•—é¡å‹ï¼Œå¦‚[`Option`] (https://doc.rust-lang.org/std/option/enum.Option.html) å’Œ[`Result`](https://doc.rust-lang.org/std/result/enum.Result. html)ã€‚

ä¸€å€‹å¸¸è¦‹çš„ä¾‹å­æ˜¯åœ¨ [`web-sys`](./web-sys.mdx) ä¸­ï¼Œç•¶æ‚¨å˜—è©¦å–å¾—äº‹ä»¶çš„ç›®æ¨™æ™‚ã€‚æ‚¨å¯èƒ½çŸ¥é“ç›®æ¨™å…ƒç´ æ˜¯ä»€éº¼ï¼Œä½†[`web_sys::Event`](https://rustwasm.github.io/wasm-bindgen/api/web_sys/struct.Event.html) API ç¸½æ˜¯æœƒå›å‚³ä¸€å€‹[` Option<web_sys::EventTarget>`](https://rustwasm.github.io/wasm-bindgen/api/web_sys/struct.Event.html#method.target)ã€‚
æ‚¨éœ€è¦å°‡å…¶è½‰æ›ç‚ºå…ƒç´ é¡å‹ï¼Œä»¥ä¾¿å‘¼å«å…¶æ–¹æ³•ã€‚

```rust
// éœ€è¦å…ˆå°å…¥é€™å€‹ Trait
use wasm_bindgen::JsCast;
use web_sys::{Event, EventTarget, HtmlInputElement, HtmlSelectElement};

fn handle_event(event: Event) {
    let target: EventTarget = event
        .target()
        .expect("I'm sure this event has a target!");

    // ä¹Ÿè¨±ç›®æ¨™æ˜¯ä¸€å€‹é¸æ“‡å…ƒç´ ï¼Ÿ
    if let Some(select_element) = target.dyn_ref::<HtmlSelectElement>() {
        // åšé»åˆ¥çš„
        return;
    }

    // å¦‚æœå®ƒèƒ½ç¢ºå®šä¸æ˜¯ä¸€å€‹é¸æ“‡å…ƒç´ ï¼Œé‚£éº¼æˆ‘å¯ä»¥è‚¯å®šå®ƒæ˜¯ä¸€å€‹è¼¸å…¥å…ƒç´ ï¼
    let input_element: HtmlInputElement = target.unchecked_into();
}
```

[`dyn_ref`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html#method.dyn_ref) æ–¹æ³•æ˜¯ä¸€å€‹æª¢æŸ¥çš„è½‰æ›ï¼Œå›å‚³ä¸€å€‹`Option<&T>`ï¼Œé€™è¡¨ç¤ºå¦‚æœè½‰æ›å¤±æ•—ï¼Œå‰‡å¯ä»¥å†æ¬¡ä½¿ç”¨åŸå§‹é¡å‹ï¼Œå› æ­¤å‚³å›`None`ã€‚ [`dyn_into`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html#method.dyn_into) æ–¹æ³•å°‡æ¶ˆè€—`self`ï¼Œé€™æ˜¯Rust ä¸­`into` æ–¹æ³•çš„ç´„å®šï¼Œå‚³å›çš„é¡å‹æ˜¯`Result<T, Self>`ã€‚å¦‚æœè½‰æ›å¤±æ•—ï¼Œå‰‡åŸå§‹çš„ `Self` å€¼å°‡åœ¨ `Err` ä¸­å‚³å›ã€‚æ‚¨å¯ä»¥å†è©¦ä¸€æ¬¡æˆ–å°åŸå§‹é¡å‹é€²è¡Œå…¶ä»–æ“ä½œã€‚

_[`JsCast` documentation](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html)._

### [`Closure`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/closure/struct.Closure.html)

`Closure` é¡å‹æä¾›äº†ä¸€ç¨®å°‡ Rust é–‰åŒ…å‚³éåˆ° JavaScript çš„æ–¹æ³•ï¼Œå‡ºæ–¼å¥å…¨æ€§åŸå› ï¼Œå‚³éçµ¦ JavaScript çš„é–‰åŒ…å¿…é ˆå…·æœ‰ `'static` ç”Ÿå‘½é€±æœŸã€‚

é€™ç¨®é¡å‹æ˜¯ä¸€å€‹â€œå¥æŸ„â€ï¼Œé€™æ„å‘³è‘—æ¯ç•¶å®ƒè¢«ä¸Ÿæ£„æ™‚ï¼Œå®ƒå°‡ä½¿å…¶å¼•ç”¨çš„ JS é–‰åŒ…ç„¡æ•ˆã€‚åœ¨ `Closure` è¢«ä¸Ÿæ£„å¾Œï¼Œå° JS ä¸­é–‰åŒ…çš„ä»»ä½•ä½¿ç”¨éƒ½æœƒå¼•ç™¼ç•°å¸¸ã€‚

ç•¶æ‚¨ä½¿ç”¨æ¥å—å‹åˆ¥[`&js_sys::Function`](https://rustwasm.github.io/wasm-bindgen/api/js_sys/struct.Function.html) çš„`js-sys` æˆ–`web-sys` API æ™‚ï¼Œé€šå¸¸æœƒä½¿ç”¨`Closure`ã€‚åœ¨[Events](../html/events.mdx) é é¢çš„[Using `Closure` éƒ¨åˆ†](../html/events.mdx#using-closure-verbose) ä¸­å¯ä»¥æ‰¾åˆ°Yew ä¸­ä½¿ç”¨`Closure` çš„ç¯„ä¾‹ã€‚

_[`Closure` æ–‡ä»¶](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/closure/struct.Closure.html)._

## [`js-sys`](https://crates.io/crates/js-sys)

`js-sys` crate æä¾›äº† JavaScript æ¨™æº–å…§å»ºç‰©ä»¶çš„ç¶å®š/å°å…¥ï¼ŒåŒ…æ‹¬å®ƒå€‘çš„æ–¹æ³•å’Œå±¬æ€§ã€‚

é€™ä¸åŒ…æ‹¬ä»»ä½• Web APIï¼Œå› ç‚ºé€™æ˜¯ [`web-sys`](./web-sys.mdx) çš„ä½œç”¨ï¼

_[`js-sys` æ–‡ä»¶](https://rustwasm.github.io/wasm-bindgen/api/js_sys/index.html)._

## [`wasm-bindgen-futures`](https://crates.io/crates/wasm-bindgen-futures)

`wasm-bindgen-futures` crate æä¾›äº†ä¸€å€‹æ©‹æ¨‘ï¼Œç”¨æ–¼å°‡JavaScript Promise é¡å‹ä½œç‚ºRust [`Future`](https://doc.rust-lang.org/stable/std/future/trait.Future.html) é€²è¡Œè™•ç†ï¼Œä¸¦åŒ…å«å°‡Rust Future è½‰æ›ç‚ºJavaScript Promise çš„å¯¦ç”¨ç¨‹å¼ã€‚ç•¶åœ¨ Rustï¼ˆwasmï¼‰ä¸­è™•ç†éåŒæ­¥æˆ–å…¶ä»–é˜»å¡å·¥ä½œæ™‚ï¼Œé€™å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œä¸¦æä¾›äº†èˆ‡ JavaScript äº‹ä»¶å’Œ JavaScript I/O åŸèªäº’å‹•çš„èƒ½åŠ›ã€‚

ç›®å‰é€™å€‹ crate ä¸­æœ‰ä¸‰å€‹ä¸»è¦ä»‹é¢ï¼š

1. [`JsFuture`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/struct.JsFuture.html) -
   ä¸€å€‹ä½¿ç”¨[`Promise`](https://rustwasm.github.io/wasm-bindgen/api/js_sys/struct.Promise.html) å»ºæ§‹çš„é¡å‹ï¼Œç„¶å¾Œå¯ä»¥ç”¨ä½œ`Future<Output=Result<JsValue, JsValue >>`ã€‚å¦‚æœ `Promise` è¢«è§£æï¼Œé€™å€‹ `Future` å°‡è§£æç‚º `Ok`ï¼Œå¦‚æœ `Promise` è¢«æ‹’çµ•ï¼Œå‰‡è§£æç‚º `Err`ï¼Œåˆ†åˆ¥åŒ…å« `Promise` çš„è§£ææˆ–æ‹’çµ•å€¼ã€‚

2. [`future_to_promise`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.future_to_promise.html) -
   å°‡ Rust `Future<Output=Result<JsValue, JsValue>>` è½‰æ›ç‚º JavaScript `Promise`ã€‚æœªä¾†çš„çµæœå°‡è½‰æ›ç‚º JavaScript ä¸­çš„å·²è§£ææˆ–å·²æ‹’çµ• `Promise`ã€‚

3. [`spawn_local`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html) -
   åœ¨ç›®å‰åŸ·è¡Œç·’ä¸Šç”¢ç”Ÿä¸€å€‹ `Future<Output = ()>`ã€‚é€™æ˜¯åœ¨ Rust ä¸­é‹è¡Œ Future çš„æœ€ä½³æ–¹æ³•ï¼Œè€Œä¸æ˜¯å°‡å…¶ç™¼é€åˆ° JavaScriptã€‚

_[`wasm-bindgen-futures` æ–‡ä»¶](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/index.html)._

### [`spawn_local`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html)

`spawn_local` å°‡æ˜¯ Yew ä¸­ `wasm-bindgen-futures` crate ä¸­æœ€å¸¸ç”¨çš„éƒ¨åˆ†ï¼Œå› ç‚ºé€™æœ‰åŠ©æ–¼ä½¿ç”¨å…·æœ‰éåŒæ­¥ API çš„å‡½å¼åº«ã€‚

```rust ,no_run
use web_sys::console;
use wasm_bindgen_futures::spawn_local;

async fn my_async_fn() -> String { String::from("Hello") }

spawn_local(async {
    let mut string = my_async_fn().await;
    string.push_str(", world!");
    // åˆ—å° "Hello, world!"
    console::log_1(&string.into());
});
```

Yew é‚„åœ¨æŸäº› API ä¸­æ·»åŠ äº†å° futures çš„æ”¯æŒï¼Œæœ€å€¼å¾—æ³¨æ„çš„æ˜¯æ‚¨å¯ä»¥å‰µå»ºä¸€å€‹æ¥å— `async` å€å¡Šçš„ `callback_future` - é€™åœ¨å…§éƒ¨ä½¿ç”¨äº† `spawn_local`ã€‚

_[`spawn_local` æ–‡ä»¶](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html)._
