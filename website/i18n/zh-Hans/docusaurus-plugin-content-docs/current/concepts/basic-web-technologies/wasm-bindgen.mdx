---
title: 'wasm-bindgen'
sidebar_label: wasm-bindgen
---

[`wasm-bindgen`](https://github.com/rustwasm/wasm-bindgen) æ˜¯ä¸€ä¸ªåœ¨ JavaScript å’Œ Rust å‡½æ•°ä¹‹é—´å»ºç«‹è°ƒç”¨æ¡¥æ¢çš„åº“å’Œå·¥å…·ã€‚å®ƒæ˜¯ç”± [Rust å’Œ WebAssembly å·¥ä½œç»„](https://rustwasm.github.io/) ä½¿ç”¨ Rust æ„å»ºçš„ã€‚

Yew ä½¿ç”¨ `wasm-bindgen` é€šè¿‡ä¸€äº› crate ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼š

- [`js-sys`](https://crates.io/crates/js-sys)
- [`wasm-bindgen`](https://crates.io/crates/wasm-bindgen)
- [`wasm-bindgen-futures`](https://crates.io/crates/wasm-bindgen-futures)
- [`web-sys`](https://crates.io/crates/web-sys)

æœ¬èŠ‚å°†ä»æ›´æŠ½è±¡çš„å±‚æ¬¡ä¸Šæ¢è®¨è¿™äº› crateï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°ç†è§£å’Œä½¿ç”¨ Yew ä¸­çš„ `wasm-bindgen` APIã€‚è¦äº†è§£æœ‰å…³ `wasm-bindgen` åŠå…¶ç›¸å…³ crate çš„æ›´æ·±å…¥æŒ‡å—ï¼Œè¯·æŸ¥çœ‹ [`wasm-bindgen` æŒ‡å¼•](https://wasm-bindgen.github.io/wasm-bindgen/)ã€‚

æœ‰å…³ä¸Šè¿° crate çš„æ–‡æ¡£ï¼Œè¯·æŸ¥çœ‹ [`wasm-bindgen docs.rs`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/index.html)ã€‚

:::tip
ä½¿ç”¨ `wasm-bindgen` doc.rs æœç´¢æ¥æŸ¥æ‰¾å·²ä½¿ç”¨ `wasm-bindgen` å¯¼å…¥çš„æµè§ˆå™¨ API å’Œ JavaScript ç±»å‹ã€‚
:::

## [`wasm-bindgen`](https://crates.io/crates/wasm-bindgen)

è¿™ä¸ª crate ä¸ºä¸Šé¢çš„å…¶ä»– crate æä¾›äº†è®¸å¤šæ„å»ºå—ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬åªä¼šæ¶µç›– `wasm-bindgen` crate çš„ä¸¤ä¸ªä¸»è¦é¢†åŸŸï¼Œå³å®å’Œä¸€äº›æ‚¨ä¼šä¸€éåˆä¸€éçœ‹åˆ°çš„ç±»å‹/ç‰¹æ€§ã€‚

### `#[wasm_bindgen]` macro

`#[wasm_bindgen]` å®æä¾›äº† Rust å’Œ JavaScript ä¹‹é—´çš„æ¥å£ï¼Œæä¾›äº†ä¸€ä¸ªåœ¨ä¸¤è€…ä¹‹é—´è¿›è¡Œè½¬æ¢çš„ç³»ç»Ÿã€‚ä½¿ç”¨è¿™ä¸ªå®æ›´ä¸ºé«˜çº§ï¼Œé™¤éæ‚¨è¦ä½¿ç”¨å¤–éƒ¨ JavaScript åº“ï¼Œå¦åˆ™ä¸åº”è¯¥ä½¿ç”¨å®ƒã€‚`js-sys` å’Œ `web-sys` crate ä¸ºå†…ç½® JavaScript ç±»å‹å’Œæµè§ˆå™¨ API æä¾›äº† `wasm-bindgen` å®šä¹‰ã€‚

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥ä½¿ç”¨ `#[wasm-bindgen]` å®æ¥å¯¼å…¥ä¸€äº›ç‰¹å®šç‰ˆæœ¬çš„ [`console.log`](https://developer.mozilla.org/en-US/docs/Web/API/Console/log) å‡½æ•°ã€‚

```rust ,no_run
use wasm_bindgen::prelude::*;

// é¦–å…ˆè®©æˆ‘ä»¬æ‰‹åŠ¨ç»‘å®š `console.log`ï¼Œè€Œä¸ä½¿ç”¨ `web_sys` çš„å¸®åŠ©ã€‚
// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™ `#[wasm_bindgen]` æ³¨è§£ï¼Œæˆ‘ä»¬ç¨‹åºçš„æ­£ç¡®æ€§å–å†³äºè¿™äº›æ³¨è§£çš„æ­£ç¡®æ€§ï¼
#[wasm_bindgen]
extern "C" {
    // åœ¨è¿™é‡Œä½¿ç”¨ `js_namespace` æ¥ç»‘å®š `console.log(..)` è€Œä¸æ˜¯åªæœ‰ `log(..)`
    #[wasm_bindgen(js_namespace = console)]
    fn log(s: &str);

    // `console.log` æ˜¯å¤šæ€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªç­¾åç»‘å®šå®ƒã€‚
    #[wasm_bindgen(js_namespace = console, js_name = log)]
    fn log_u32(a: u32);

    // å¤šä¸ªå‚æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ï¼
    #[wasm_bindgen(js_namespace = console, js_name = log)]
    fn log_many(a: &str, b: &str);
}

// ä½¿ç”¨å¯¼å…¥çš„å‡½æ•°ï¼
log("Hello from Rust!");
log_u32(42);
log_many("Logging", "many values!");
```

_è¿™ä¸ªç¤ºä¾‹æ˜¯åŸºäº [1.2 ä½¿ç”¨ console.log çš„ `wasm-bindgen` æŒ‡å¼•](https://wasm-bindgen.github.io/wasm-bindgen/examples/console-log.html) æ”¹ç¼–çš„ã€‚_

### æ¨¡æ‹Ÿç»§æ‰¿

åœ¨ JavaScript ç±»ä¹‹é—´çš„ç»§æ‰¿æ˜¯ JavaScript è¯­è¨€çš„æ ¸å¿ƒç‰¹æ€§ï¼ŒDOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯å›´ç»•å®ƒè®¾è®¡çš„ã€‚å½“ä½¿ç”¨ `wasm-bindgen` å¯¼å…¥ç±»å‹æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥æ·»åŠ æè¿°å®ƒä»¬ç»§æ‰¿å…³ç³»çš„å±æ€§ã€‚

åœ¨ Rust ä¸­ï¼Œè¿™ç§ç»§æ‰¿å…³ç³»ä½¿ç”¨ [`Deref`](https://doc.rust-lang.org/std/ops/trait.Deref.html) å’Œ [`AsRef`](https://doc.rust-lang.org/std/convert/trait.AsRef.html) ç‰¹æ€§æ¥è¡¨ç¤ºã€‚è¿™é‡Œä¸¾ä¸ªä¾‹å­å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ï¼›å‡è®¾æ‚¨æœ‰ä¸‰ç§ç±»å‹ `A`ã€`B` å’Œ `C`ï¼Œå…¶ä¸­ `C` æ‰©å±•äº† `B`ï¼Œè€Œ `B` åˆæ‰©å±•äº† `A`ã€‚

åœ¨å¯¼å…¥è¿™äº›ç±»å‹æ—¶ï¼Œ`#[wasm-bindgen]` å®å°†æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å®ç° `Deref` å’Œ `AsRef` ç‰¹æ€§ï¼š

- `C` å¯ä»¥ `Deref` åˆ° `B`
- `B` å¯ä»¥ `Deref` åˆ° `A`
- `C` å¯ä»¥è¢« `AsRef` åˆ° `B`
- `C` å’Œ `B` éƒ½å¯ä»¥è¢« `AsRef` åˆ° `A`

è¿™äº›å®ç°å…è®¸æ‚¨åœ¨ `C` çš„å®ä¾‹ä¸Šè°ƒç”¨ `A` çš„æ–¹æ³•ï¼Œå¹¶å°† `C` ç”¨ä½œ `&B` æˆ– `&A`ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ `#[wasm-bindgen]` å¯¼å…¥çš„æ¯ç§ç±»å‹éƒ½æœ‰ç›¸åŒçš„æ ¹ç±»å‹ï¼Œæ‚¨å¯ä»¥å°†å…¶è§†ä¸ºä¸Šé¢ç¤ºä¾‹ä¸­çš„ `A`ï¼Œè¿™ç§ç±»å‹æ˜¯ [`JsValue`](#jsvalue)ï¼Œä¸‹é¢æœ‰å®ƒçš„éƒ¨åˆ†ã€‚

_[`wasm-bindgen` æŒ‡å¼•ä¸­çš„ extends éƒ¨åˆ†](https://wasm-bindgen.github.io/wasm-bindgen/reference/attributes/on-js-imports/extends.html)_

### [`JsValue`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/struct.JsValue.html)

è¿™æ˜¯ JavaScript æ‹¥æœ‰çš„å¯¹è±¡çš„è¡¨ç¤ºï¼Œè¿™æ˜¯ `wasm-bindgen` çš„æ ¹æ•è·ç±»å‹ã€‚ä»»ä½•æ¥è‡ª `wasm-bindgen` çš„ç±»å‹éƒ½æ˜¯ `JsValue`ï¼Œè¿™æ˜¯å› ä¸º JavaScript æ²¡æœ‰å¼ºç±»å‹ç³»ç»Ÿï¼Œå› æ­¤æ¥å—å˜é‡ `x` çš„ä»»ä½•å‡½æ•°éƒ½ä¸å®šä¹‰å…¶ç±»å‹ï¼Œå› æ­¤ `x` å¯ä»¥æ˜¯æœ‰æ•ˆçš„ JavaScript å€¼ï¼›å› æ­¤ `JsValue`ã€‚å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨æ¥å— `JsValue` çš„å¯¼å…¥å‡½æ•°æˆ–ç±»å‹ï¼Œé‚£ä¹ˆä»»ä½•å¯¼å…¥çš„å€¼åœ¨æŠ€æœ¯ä¸Šéƒ½æ˜¯æœ‰æ•ˆçš„ã€‚

`JsValue` å¯ä»¥è¢«å‡½æ•°æ¥å—ï¼Œä½†è¯¥å‡½æ•°å¯èƒ½ä»ç„¶åªæ¥å—æŸäº›ç±»å‹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ panic - å› æ­¤åœ¨ä½¿ç”¨åŸå§‹ `wasm-bindgen` API æ—¶ï¼Œè¯·æ£€æŸ¥å¯¼å…¥çš„ JavaScript çš„æ–‡æ¡£ï¼Œä»¥ç¡®å®šæ˜¯å¦ä¼šåœ¨è¯¥å€¼ä¸æ˜¯æŸç§ç±»å‹æ—¶å¼•å‘å¼‚å¸¸ï¼ˆpanicï¼‰ã€‚

_[`JsValue` æ–‡æ¡£](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/struct.JsValue.html)ã€‚_

### [`JsCast`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html)

Rust æœ‰ä¸€ä¸ªå¼ºç±»å‹ç³»ç»Ÿï¼Œè€Œ JavaScriptâ€¦â€¦æ²¡æœ‰ğŸ˜ã€‚ä¸ºäº†è®© Rust ä¿æŒè¿™äº›å¼ºç±»å‹ä½†ä»ç„¶æ–¹ä¾¿ï¼ŒWebAssembly å·¥ä½œç»„æå‡ºäº†ä¸€ä¸ªéå¸¸å·§å¦™çš„ç‰¹æ€§ `JsCast`ã€‚å®ƒçš„å·¥ä½œæ˜¯å¸®åŠ©æ‚¨ä»ä¸€ä¸ª JavaScript "ç±»å‹" è½¬æ¢åˆ°å¦ä¸€ä¸ª "ç±»å‹"ï¼Œè¿™å¬èµ·æ¥å¾ˆæ¨¡ç³Šï¼Œä½†å®ƒæ„å‘³ç€å¦‚æœæ‚¨æœ‰ä¸€ä¸ªç±»å‹ï¼Œæ‚¨çŸ¥é“å®ƒæ˜¯å¦ä¸€ä¸ªç±»å‹ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨ `JsCast` çš„å‡½æ•°ä»ä¸€ä¸ªç±»å‹è·³åˆ°å¦ä¸€ä¸ªç±»å‹ã€‚å½“ä½¿ç”¨ `web-sys`ã€`wasm_bindgen`ã€`js-sys` æ—¶ï¼Œäº†è§£è¿™ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ - æ‚¨ä¼šæ³¨æ„åˆ°è®¸å¤šç±»å‹å°†ä»è¿™äº› crate ä¸­å®ç° `JsCast`ã€‚

`JsCast` æä¾›äº†è½¬æ¢çš„æ£€æŸ¥å’Œä¸æ£€æŸ¥æ–¹æ³• - å› æ­¤åœ¨è¿è¡Œæ—¶ï¼Œå¦‚æœæ‚¨ä¸ç¡®å®šæŸä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ‚¨å¯ä»¥å°è¯•å°†å…¶è½¬æ¢ï¼Œè¿™å°†è¿”å›å¯èƒ½çš„å¤±è´¥ç±»å‹ï¼Œå¦‚ [`Option`](https://doc.rust-lang.org/std/option/enum.Option.html) å’Œ [`Result`](https://doc.rust-lang.org/std/result/enum.Result.html)ã€‚

ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯åœ¨ [`web-sys`](./web-sys.mdx) ä¸­ï¼Œå½“æ‚¨å°è¯•è·å–äº‹ä»¶çš„ç›®æ ‡æ—¶ã€‚æ‚¨å¯èƒ½çŸ¥é“ç›®æ ‡å…ƒç´ æ˜¯ä»€ä¹ˆï¼Œä½† [`web_sys::Event`](https://rustwasm.github.io/wasm-bindgen/api/web_sys/struct.Event.html) API æ€»æ˜¯ä¼šè¿”å›ä¸€ä¸ª [`Option<web_sys::EventTarget>`](https://rustwasm.github.io/wasm-bindgen/api/web_sys/struct.Event.html#method.target)ã€‚
æ‚¨éœ€è¦å°†å…¶è½¬æ¢ä¸ºå…ƒç´ ç±»å‹ï¼Œä»¥ä¾¿è°ƒç”¨å…¶æ–¹æ³•ã€‚

```rust
// éœ€è¦å…ˆå¯¼å…¥è¿™ä¸ª Trait
use wasm_bindgen::JsCast;
use web_sys::{Event, EventTarget, HtmlInputElement, HtmlSelectElement};

fn handle_event(event: Event) {
    let target: EventTarget = event
        .target()
        .expect("I'm sure this event has a target!");

    // ä¹Ÿè®¸ç›®æ ‡æ˜¯ä¸€ä¸ªé€‰æ‹©å…ƒç´ ï¼Ÿ
    if let Some(select_element) = target.dyn_ref::<HtmlSelectElement>() {
        // åšç‚¹åˆ«çš„
        return;
    }

    // å¦‚æœå®ƒèƒ½ç¡®å®šä¸æ˜¯ä¸€ä¸ªé€‰æ‹©å…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥è‚¯å®šå®ƒæ˜¯ä¸€ä¸ªè¾“å…¥å…ƒç´ ï¼
    let input_element: HtmlInputElement = target.unchecked_into();
}
```

[`dyn_ref`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html#method.dyn_ref) æ–¹æ³•æ˜¯ä¸€ä¸ªæ£€æŸ¥çš„è½¬æ¢ï¼Œè¿”å›ä¸€ä¸ª `Option<&T>`ï¼Œè¿™æ„å‘³ç€å¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™å¯ä»¥å†æ¬¡ä½¿ç”¨åŸå§‹ç±»å‹ï¼Œå› æ­¤è¿”å› `None`ã€‚[`dyn_into`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html#method.dyn_into) æ–¹æ³•å°†æ¶ˆè€— `self`ï¼Œè¿™æ˜¯ Rust ä¸­ `into` æ–¹æ³•çš„çº¦å®šï¼Œè¿”å›çš„ç±»å‹æ˜¯ `Result<T, Self>`ã€‚å¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™åŸå§‹çš„ `Self` å€¼å°†åœ¨ `Err` ä¸­è¿”å›ã€‚æ‚¨å¯ä»¥å†è¯•ä¸€æ¬¡æˆ–å¯¹åŸå§‹ç±»å‹è¿›è¡Œå…¶ä»–æ“ä½œã€‚

_[`JsCast` documentation](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html)._

### [`Closure`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/closure/struct.Closure.html)

`Closure` ç±»å‹æä¾›äº†ä¸€ç§å°† Rust é—­åŒ…ä¼ é€’åˆ° JavaScript çš„æ–¹æ³•ï¼Œå‡ºäºå¥å…¨æ€§åŸå› ï¼Œä¼ é€’ç»™ JavaScript çš„é—­åŒ…å¿…é¡»å…·æœ‰ `'static` ç”Ÿå‘½å‘¨æœŸã€‚

è¿™ç§ç±»å‹æ˜¯ä¸€ä¸ªâ€œå¥æŸ„â€ï¼Œæ„å‘³ç€æ¯å½“å®ƒè¢«ä¸¢å¼ƒæ—¶ï¼Œå®ƒå°†ä½¿å…¶å¼•ç”¨çš„ JS é—­åŒ…æ— æ•ˆã€‚åœ¨ `Closure` è¢«ä¸¢å¼ƒåï¼Œå¯¹ JS ä¸­é—­åŒ…çš„ä»»ä½•ä½¿ç”¨éƒ½å°†å¼•å‘å¼‚å¸¸ã€‚

å½“æ‚¨ä½¿ç”¨æ¥å—ç±»å‹ [`&js_sys::Function`](https://rustwasm.github.io/wasm-bindgen/api/js_sys/struct.Function.html) çš„ `js-sys` æˆ– `web-sys` API æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨ `Closure`ã€‚åœ¨ [Events](../html/events.mdx) é¡µé¢çš„ [Using `Closure` éƒ¨åˆ†](../html/events.mdx#using-closure-verbose) ä¸­å¯ä»¥æ‰¾åˆ°åœ¨ Yew ä¸­ä½¿ç”¨ `Closure` çš„ç¤ºä¾‹ã€‚

_[`Closure` æ–‡æ¡£](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/closure/struct.Closure.html)._

## [`js-sys`](https://crates.io/crates/js-sys)

`js-sys` crate æä¾›äº† JavaScript æ ‡å‡†å†…ç½®å¯¹è±¡çš„ç»‘å®š/å¯¼å…¥ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„æ–¹æ³•å’Œå±æ€§ã€‚

è¿™ä¸åŒ…æ‹¬ä»»ä½• Web APIï¼Œå› ä¸ºè¿™æ˜¯ [`web-sys`](./web-sys.mdx) çš„ä½œç”¨ï¼

_[`js-sys` æ–‡æ¡£](https://rustwasm.github.io/wasm-bindgen/api/js_sys/index.html)._

## [`wasm-bindgen-futures`](https://crates.io/crates/wasm-bindgen-futures)

`wasm-bindgen-futures` crate æä¾›äº†ä¸€ä¸ªæ¡¥æ¢ï¼Œç”¨äºå°† JavaScript Promise ç±»å‹ä½œä¸º Rust [`Future`](https://doc.rust-lang.org/stable/std/future/trait.Future.html) è¿›è¡Œå¤„ç†ï¼Œå¹¶åŒ…å«å°† Rust Future è½¬æ¢ä¸º JavaScript Promise çš„å®ç”¨ç¨‹åºã€‚å½“åœ¨ Rustï¼ˆwasmï¼‰ä¸­å¤„ç†å¼‚æ­¥æˆ–å…¶ä»–é˜»å¡å·¥ä½œæ—¶ï¼Œè¿™å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œå¹¶æä¾›äº†ä¸ JavaScript äº‹ä»¶å’Œ JavaScript I/O åŸè¯­è¿›è¡Œäº¤äº’çš„èƒ½åŠ›ã€‚

ç›®å‰è¿™ä¸ª crate ä¸­æœ‰ä¸‰ä¸ªä¸»è¦æ¥å£ï¼š

1. [`JsFuture`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/struct.JsFuture.html) -
   ä¸€ä¸ªä½¿ç”¨ [`Promise`](https://rustwasm.github.io/wasm-bindgen/api/js_sys/struct.Promise.html) æ„é€ çš„ç±»å‹ï¼Œç„¶åå¯ä»¥ç”¨ä½œ `Future<Output=Result<JsValue, JsValue>>`ã€‚å¦‚æœ `Promise` è¢«è§£æï¼Œè¿™ä¸ª `Future` å°†è§£æä¸º `Ok`ï¼Œå¦‚æœ `Promise` è¢«æ‹’ç»ï¼Œåˆ™è§£æä¸º `Err`ï¼Œåˆ†åˆ«åŒ…å« `Promise` çš„è§£ææˆ–æ‹’ç»å€¼ã€‚

2. [`future_to_promise`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.future_to_promise.html) -
   å°† Rust `Future<Output=Result<JsValue, JsValue>>` è½¬æ¢ä¸º JavaScript `Promise`ã€‚æœªæ¥çš„ç»“æœå°†è½¬æ¢ä¸º JavaScript ä¸­çš„å·²è§£ææˆ–å·²æ‹’ç» `Promise`ã€‚

3. [`spawn_local`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html) -
   åœ¨å½“å‰çº¿ç¨‹ä¸Šç”Ÿæˆä¸€ä¸ª `Future<Output = ()>`ã€‚è¿™æ˜¯åœ¨ Rust ä¸­è¿è¡Œ Future çš„æœ€ä½³æ–¹æ³•ï¼Œè€Œä¸æ˜¯å°†å…¶å‘é€åˆ° JavaScriptã€‚

_[`wasm-bindgen-futures` æ–‡æ¡£](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/index.html)._

### [`spawn_local`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html)

`spawn_local` å°†æ˜¯ Yew ä¸­ `wasm-bindgen-futures` crate ä¸­æœ€å¸¸ç”¨çš„éƒ¨åˆ†ï¼Œå› ä¸ºè¿™æœ‰åŠ©äºä½¿ç”¨å…·æœ‰å¼‚æ­¥ API çš„åº“ã€‚

```rust ,no_run
use web_sys::console;
use wasm_bindgen_futures::spawn_local;

async fn my_async_fn() -> String { String::from("Hello") }

spawn_local(async {
    let mut string = my_async_fn().await;
    string.push_str(", world!");
    // æ§åˆ¶å°è¾“å‡º "Hello, world!"
    console::log_1(&string.into());
});
```

Yew è¿˜åœ¨æŸäº› API ä¸­æ·»åŠ äº†å¯¹ futures çš„æ”¯æŒï¼Œæœ€å€¼å¾—æ³¨æ„çš„æ˜¯æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¥å— `async` å—çš„ `callback_future` - è¿™åœ¨å†…éƒ¨ä½¿ç”¨äº† `spawn_local`ã€‚

_[`spawn_local` æ–‡æ¡£](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html)._
